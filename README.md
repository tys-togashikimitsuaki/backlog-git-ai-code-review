# Backlog AI Code Reviewer

このVS Code拡張機能は、Backlogのプルリクエスト、ブランチ、または課題から直接GitHub Copilotを使用してAIコードレビューをシームレスに実行できるようにします。

## 主な機能
- **プルリクエストのレビュー**: Backlogプロジェクト内のオープンなPRを選択し、GitHub Copilotに差分をレビューさせることができます。
- **ブランチのレビュー**: PRを作成せずに、マージ先（ベース）ブランチと比較（フィーチャー）ブランチを手動で指定してカスタムコードレビューを実行できます。
- **課題のレビュー**: Backlog課題を検索・選択することで、AIレビューアーに追加のコンテキスト（課題の詳細など）を提供できます。
- **コメントの投稿**: 生成されたAIレビューレポートを、紐付けたBacklog課題へ直接コメントとして投稿できます。

## 設定方法
歯車のマークから設定画面を開き設定を行います。
- **スペースキー**: Backlogのスペースキー（例: `mycompany` または ホストURL全体）。
- **APIキー**: 読み書き権限を持つBacklog APIキー。
- **ドメイン**: ワークスペースが `backlog.jp` または `backlog.com` のどちらを使用しているかを指定します。

## 必須要件
- 有効なBacklogスペースとAPIキー
- VS Code上でGitHub Copilotが有効化されていること

## 使い方

1. **設定を行う**
   - サイドバーの「Backlog AI Reviewer」アイコンをクリックし、上部の歯車アイコン（設定）を開きます。
   - `Space Key`、`API Key`、`Domain`を設定します。
2. **レビュー対象を選択する**
   - サイドバーの更新ボタンを押すと、プロジェクトとPR一覧が表示されます。
   - PRを対象にする場合：表示されたPRをクリックすると即座にAIレビューが開始されます。
   - **(オプション) 課題を紐付ける**
     - サイドバーの「課題を選択」や上部のアイコンから、キーワードや課題キーで対象のBacklog課題を検索・選択します。この情報がAIへのコンテキストとして追加されます。
   - **(オプション) ブランチを手動指定する**
     - PRがない場合、「ブランチを選択」からマージ元とマージ先のブランチを選んでレビューを実行させることができます。
3. **レビュー結果の確認と投稿**
   - AIレビューが完了すると、専用のパネルにマークダウン形式で結果が表示されます。
   - もし課題が紐付けられていれば、画面下部の「Backlog課題 (...) にコメントとして投稿」ボタンからワンクリックでレビュー結果を送信できます。

## リリースノート

### 0.5.0
- サイドバーの操作文言を分かりやすく改善（「--- ブランチを指定してレビュー ---」等）。
- ブランチを選択後、直ちにAIレビューを開始するようにフローを短縮。
- これまでの選択状態（課題やブランチなど）をリセットする「選択をクリア」機能を追加。

### 0.4.0
- バックログ課題へのレビュー投稿時の絵文字エラー対策を追加。
- DBクエリのパフォーマンス観点（実行計画、冗長性）をレビュー指示に追加。
- ローカルから差分を取得する際、マージ元とマージ先のブランチを自動でチェックアウトしPull（更新）する機能を追加。

### 0.2.0
- 安定性向上のためのパッケージ化構成の改善（依存ライブラリの同梱修正）。
- 日本語READMEの追加。
- 課題指定とブランチ指定のワークフロー改善。

### 0.1.0
- プルリクエスト、ブランチ、課題に基づくAIレビュー機能の初期リリース。
- バックログ課題へのコメント投稿機能を追加。
